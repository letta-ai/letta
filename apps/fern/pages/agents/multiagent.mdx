---
title: Multi-agent Systems
slug: guides/agents/multi-agent
---


Letta provides built-in tools for supporting cross-agent communication to built multi-agent workflows. To enable multi-agent collaboration, you should create agents that have access to the built-in cross-agent communication tools:
* `send_message_to_specific_agent(message: str, agent_id: str)`: Allows the agent to send a message to a single agent specified by ID. 
* `send_message_to_agents_matching_all_tags(message: str, tags: List[str])`: Allows the agent to send a message to all agents in the same organization that match ALL of the given tags. 

Letta agents can also share state via shared memory blocks. Shared memory blocks allow agents to have shared memory (e.g. memory about an organization they are both a part of or a task they are both working on). 

## Cross-agent communication
To enable cross-agent communication, you can add a built-in tool or implement your own tool to send messages to other agents.

### Messaging a single agent 
```python
def send_message_to_specific_agent(message: str, other_agent_id: str) -> Optional[str]:
    """
    Send a message to a specific Letta agent within the same organization.

    Args:
        message (str): The message to be sent to the target Letta agent.
        other_agent_id (str): The identifier of the target Letta agent.

    Returns:
        Optional[str]: The response from the Letta agent. It's possible that the agent does not respond.
    """
    ...
```

### Messaging multiple agents
```python
def send_message_to_agents_matching_all_tags(message: str, tags: List[str]) -> List[str]:
    """
    Send a message to all agents in the same organization that match ALL of the given tags.

    Messages are sent in parallel for improved performance, with retries on flaky calls and timeouts for long-running requests.
    This function does not use a cursor (pagination) and enforces a limit of 100 agents.

    Args:
        message (str): The message to be sent to each matching agent.
        tags (List[str]): The list of tags that each agent must have (match_all_tags=True).

    Returns:
        List[str]: A list of responses from the agents that match all tags.
                   Each response corresponds to one agent.
    """
    ...
```

### Customizing cross-agent communication
You can also write your own agent communication tools by using the Letta client. Since Letta runs as a service, you can make request to the server from a tool to send messages to other agents. Below is an example of a tool that triggers agents tagged with `worker` to start their tasks:
```python
def trigger_worker_agents() -> Optional[str]:
    """
    Trigger worker agents to start their tasks, without waiting for a response.
    """
    from letta_client import Letta

    # TODO: point this to the server where the worker agents are running
    client = Letta(base_url="http://127.0.0.1:8283")

    # message all worker agents async
    for agent in client.agents.list(tags=["worker"]):
        response = client.agents.send_message_async(
            agent_id=agent.id,
            message="Start my task",
        )
```



## Shared memory
Agents can share state via shared memory blocks. This allows agents to have a "shared memory". You can shared blocks between agents by attaching the same block ID to multiple agents. 
```python
from letta_client import Letta

client = Letta(base_url="http://127.0.0.1:8283")

# create a shared memory block
shared_block = client.blocks.create(label="organization", value="Organization: Letta")

# create a supervisor agent
supervisor_agent = client.agents.create(
    llm="anthropic/claude-3-5-sonnet-20241022",
    embedding="openai/text-embedding-ada-002",
    # blocks created for this agentj
    memory_blocks=[{"persona": "I am a supervisor"}],
    # pre-existing shared block that is "attached" to this agent
    block_ids=[shared_block.id],
)

# create a worker agent
worker_agent = client.agents.create(
    llm="anthropic/claude-3-5-sonnet-20241022",
    embedding="openai/text-embedding-ada-002",
    # blocks created for this agent
    memory_blocks=[{"persona": "I am a worker"}],
    # pre-existing shared block that is "attached" to this agent
    block_ids=[shared_block.id],
)
```
Memory blocks can also be accessed by other agents, even if not shared. For example, worker agents can write the output of their task to a memory block, which is then read by a supervisor agent. 
