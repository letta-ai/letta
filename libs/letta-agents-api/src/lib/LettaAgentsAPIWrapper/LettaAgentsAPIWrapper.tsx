'use client';
import { OpenAPI } from '../_autogenerated/requests';
import { useEffect } from 'react';

OpenAPI.BASE = '';
OpenAPI.HEADERS = {
  'Content-Type': 'application/json',
  'Cache-Control': 'no-cache',
};

interface LettaAgentsAPIWrapperProps {
  children: React.ReactNode;
  baseUrl: string;
}

declare global {
  interface Window {
    baseUrl?: string;
  }
}

export function LettaAgentsAPIWrapper({
  children,
  baseUrl,
}: LettaAgentsAPIWrapperProps) {
  useEffect(() => {
    window.baseUrl = baseUrl;

    OpenAPI.interceptors.request.use((config) => {
      config.baseURL = baseUrl;

      return config;
    });
  }, [baseUrl]);

  return children;
}
